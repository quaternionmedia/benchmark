# benchmark — Schema Reference

> Canonical reference for all bench data fields. See [CONTRIBUTING.md](./CONTRIBUTING.md) for the full contribution workflow.

---

## Region File Structure

All bench data lives in `public/data/regions/`. Each YAML file covers one geographic region (city, borough, park, etc.).

```yaml
region:
  name: string          # Human-readable region name (required)
  description: string   # Optional description of the area

benches:
  - <BenchEntry>
  - <BenchEntry>
  # ...
```

File naming convention: `<region-slug>.yaml` — e.g. `london-south.yaml`, `central-park.yaml`.

---

## Bench Entry Fields

| Field | Type | Required | Constraints |
|---|---|---|---|
| `id` | string | ✅ | Unique across all files. Convention: `<region-slug>-<NNN>` |
| `name` | string | ✅ | Human-readable descriptive name |
| `lat` | float | ✅ | Decimal latitude, −90 to 90 |
| `lng` | float | ✅ | Decimal longitude, −180 to 180 |
| `material` | enum | ✅ | See [Material](#material) |
| `backrest` | bool | ✅ | `true` or `false` |
| `armrests` | bool | ✅ | `true` or `false` |
| `accessible` | bool/null | ✅ | `true`, `false`, or `null` (unknown) |
| `condition` | enum | ✅ | See [Condition](#condition) |
| `seats` | int | ✅ | Number of seats (1–20) |
| `covered` | bool | ✅ | `true` or `false` |
| `added_by` | string | ✅ | GitHub username or `community` |
| `added_at` | string | ✅ | ISO 8601 date: `YYYY-MM-DD` |
| `notes` | string | ❌ | Optional. Max 280 characters |
| `image_url` | string | ❌ | Full URL or `null` |

---

## Material

| Value | Meaning |
|---|---|
| `wood` | Wooden slats — pine, teak, recycled timber, etc. |
| `metal` | Steel, iron, aluminium, or mixed metal construction |
| `stone` | Natural stone, granite, slate |
| `plastic` | Plastic, fibreglass, or composite materials |
| `concrete` | Poured or precast concrete |
| `other` | Any material not covered above |

---

## Condition

| Value | Meaning |
|---|---|
| `good` | Clean, structurally sound, no visible damage |
| `fair` | Minor wear or fading — still fully functional |
| `poor` | Damaged, missing parts, or unsafe to sit on |
| `unknown` | Not assessed in person (added from photos or reports) |

Use `unknown` rather than guessing if you haven't seen the bench yourself.

---

## Example Entry

```yaml
  - id: london-south-001
    name: "Tate Modern Riverside Bench"
    lat: 51.5076
    lng: -0.0994
    material: stone
    backrest: false
    armrests: false
    accessible: true
    condition: good
    seats: 4
    covered: false
    added_by: community
    added_at: "2024-11-01"
    notes: "Concrete plinth bench facing the Thames. Good view of St Paul's."
    image_url: null
```

---

## Compiled GeoJSON Output

`scripts/compile-yaml.js` compiles all region YAML files into `public/data/benches.geojson`. Do not edit this file directly.

Each bench becomes a GeoJSON `Feature`:

```json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [-0.0994, 51.5076]
  },
  "properties": {
    "id": "london-south-001",
    "name": "Tate Modern Riverside Bench",
    "region": "London South",
    "material": "stone",
    "backrest": false,
    "armrests": false,
    "accessible": true,
    "condition": "good",
    "seats": 4,
    "covered": false,
    "added_by": "community",
    "added_at": "2024-11-01",
    "notes": "Concrete plinth bench facing the Thames. Good view of St Paul's.",
    "image_url": null
  }
}
```

> GeoJSON coordinates are `[longitude, latitude]` — the reverse of conventional `lat, lng` order.

---

## Validation

The validator runs automatically on `npm run build` and via `npm run validate`. It checks:

- All required fields are present
- `id` is unique across all region files
- `lat` is within −90 to 90
- `lng` is within −180 to 180
- `material` matches one of the valid enum values
- `condition` matches one of the valid enum values
- `notes` does not exceed 280 characters

If validation fails the build is aborted and errors are printed to the console.

---

## ID Convention

IDs follow the pattern `<region-slug>-<NNN>`:

- `london-south-001`
- `central-park-012`
- `kyoto-central-003`

When adding to an existing region, use the next available number. IDs must never be reused, even if a bench is removed.
